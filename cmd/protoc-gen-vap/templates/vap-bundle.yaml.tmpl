apiVersion: admissionregistration.k8s.io/v1beta1
kind: ValidatingAdmissionPolicy
metadata:
  name: {{ .Kind }}-stable-channel-policy
  namespace: {{ .Namespace }}
spec:
  rules:
  - selector:
      apiGroups:
      - {{ .APIGroup }}
      kinds:
      - {{ .Kind }}
    validation:
      cel:
        expression: |
          {{- fieldsLen := len .ExtendedFieldPaths }}
          {{- range $i, $field := .ExtendedFieldPaths }}
            object.{{ $field }} == null {{ (eq $i $fieldsLen-1) | "" "&&" }}
          {{- end }}
